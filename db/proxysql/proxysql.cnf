# Data & Logs Settings
datadir="/var/lib/proxysql"
errorlog="/var/lib/proxysql/proxysql.log"

admin_variables=
{
    admin_credentials="admin:admin;radmin:radmin"
    mysql_ifaces="0.0.0.0:6032"
    refresh_interval=2000
    web_enabled=true
    web_port=6080
    stats_credentials="stats:admin"
    debug=true
}

mysql_variables =
{
    threads = 1000
    max_connections = 2000
    default_query_delay= 0
    default_query_timeout=1
    have_compress=true
    poll_timeout=2000
    interfaces="0.0.0.0:6033;/tmp/proxysql.sock"
    default_schema="information_schema"
    stacksize=1048576
    server_version="5.7.22"
    connect_timeout_server=10000
    monitor_history=60000
    monitor_connect_interval=200000
    monitor_ping_interval=200000
    ping_interval_server_msec=5000
    ping_timeout_server=200
    commands_stats=true
    sessions_sort=true
    monitor_username="root"
    monitor_password="xylsalsdjfl"
    monitor_galera_healthcheck_interval=200
    monitor_galera_healthcheck_timeout=80
}

mysql_servers =
(
    {
        address="db"
        port=3306
        hostgroup=0
        max_connections=1000
    },
    {
        address="db-replica-1"
        port=3305
        hostgroup=1
        max_connections=1000
    },
    {
        address="db-replica-1"
        port=3304
        hostgroup=1
        max_connections=1000
    },
)

mysql_users:
(
    {
    	username = "social"
    	password = "alsdgkjsadf"
    	default_hostgroup = 0
    	max_connections=1000
    	default_schema="information_schema"
    	active = 1
    }
)

mysql_query_rules:
(
    {
        rule_id=1
        active=1
        match_pattern="^SELECT.*FOR UPDATE$"
        destination_hostgroup=0
        apply=1
    },
    {
        rule_id=2
        active=1
        match_pattern="^SELECT"
        destination_hostgroup=1
        apply=1
    },
)

